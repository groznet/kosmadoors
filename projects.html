<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Наши проекты - KosMADoors | Двери для дома и офиса</title>
    <!-- TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Alpine.js -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="assets/css/main.css">
    <style>
        /* Custom styles for nested menus */
        .submenu {
            transition: all 0.3s ease;
        }
        /* Hero section with background image */
        .hero-section {
            background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%23343e4a"/><path d="M0 0L100 100" stroke="%23455263" stroke-width="2"/><path d="M100 0L0 100" stroke="%23455263" stroke-width="2"/></svg>');
            background-size: cover;
            background-position: center;
        }
        /* Project card hover effect */
        .project-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }
        /* Active tab style */
        .tab-active {
            background-color: #1e40af;
            color: white;
        }
    </style>
</head>
<body class="bg-gray-50 flex flex-col min-h-screen" x-data="{ mobileMenuOpen: false, sidebarOpen: false, activeTab: 'all' }">
    <!-- Header -->
    <header id="header-wrapper" class="bg-white shadow-md sticky top-0 z-50"></header>

    <div class="flex flex-1">
        <!-- Sidebar -->
        <aside id="sidebar-wrapper" class="bg-white shadow-md w-64 fixed h-full z-40 lg:z-auto lg:static transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out" 
                :class="{ 'translate-x-0': sidebarOpen }"
                x-show="true" 
                x-transition>
        </aside>        

        <!-- Main Content -->
        <main class="flex-1">
            <!-- Mobile sidebar toggle button -->
            <div class="lg:hidden bg-white p-2 border-b flex justify-between items-center">
                <button @click="sidebarOpen = true" class="text-gray-700 flex items-center">
                    <i class="fas fa-bars mr-2"></i> Категории
                </button>
                <div class="flex items-center">
                    <button class="p-2 text-gray-700">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>

            <!-- Hero Section -->
            <section class="hero-section text-white py-16 px-4 md:px-8 bg-center bg-cover relative" style="background-image: url('assets/images/hero-bg.jpg');">
                <!-- Dark overlay -->
                <div class="absolute inset-0 bg-black bg-opacity-50"></div>

                <div class="container mx-auto relative z-10 text-center">
                    <h1 class="text-4xl md:text-5xl font-bold mb-4">Наши проекты</h1>
                    <p class="text-xl max-w-3xl mx-auto">
                        Реализованные проекты установки дверей в квартирах, домах и офисах по всей Чечне
                    </p>
                </div>
            </section>

            <section 
                class="py-12 px-4 md:px-8 bg-white"
                x-data="projectsSection()"
                >
                <div class="container mx-auto">
                    <h2 class="text-3xl font-bold text-center mb-12">Примеры наших работ</h2>

                    <!-- Tabs -->
                    <div class="flex flex-wrap justify-center gap-2 mb-12">
                        <template x-for="tab in tabs" :key="tab.id">
                            <button 
                                @click="activeTab = tab.id" 
                                :class="activeTab === tab.id 
                                    ? 'bg-blue-800 text-white' 
                                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'"
                                class="px-6 py-3 rounded-full font-medium transition-colors"
                                x-text="tab.label"
                            ></button>
                        </template>
                    </div>

                    <!-- Projects Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <template x-for="img in filteredImages" :key="img">
                            <div class="project-card bg-white rounded-lg overflow-hidden shadow-md cursor-pointer"
                                @click="openLightbox(img)">
                                <div class="h-56 bg-gray-200 flex items-center justify-center relative">
                                    <img :src="img" alt="" class="object-cover w-full h-full">
                                    <span class="absolute top-4 left-4 bg-blue-800 text-white text-sm px-3 py-1 rounded"
                                        x-text="activeTabLabel"></span>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>

                <!-- Lightbox -->
                <div 
                    class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50" 
                    x-show="lightboxOpen" 
                    x-transition
                    @click="lightboxOpen=false"
                >
                    <img :src="lightboxImage" alt="Preview" class="max-h-[90%] max-w-[90%] rounded shadow-lg">
                </div>
            </section>

            <script>
            function projectsSection() {
                return {
                    activeTab: 'all',
                    tabs: [
                        { id: 'all', label: 'Все проекты' },
                        { id: 'dveri', label: 'Входные двери' },
                        { id: 'perily', label: 'Перилы' },
                        { id: 'vorota', label: 'Ворота' },
                        { id: 'navesy', label: 'Навесы' },
                        { id: 'kozyrki', label: 'Козырьки' },
                    ],
                    // define how many images exist in each folder
                    categories: {
                        dveri: 117,
                        perily: 49,
                        vorota: 24,
                        navesy: 16,
                        kozyrki: 3
                    },
                    lightboxOpen: false,
                    lightboxImage: '',

                    get filteredImages() {
                        let images = [];
                        if (this.activeTab === 'all') {
                            for (let cat in this.categories) {
                                for (let i = 1; i <= this.categories[cat]; i++) {
                                    images.push(`assets/images/projects/${cat}/${i}.jpg`);
                                }
                            }
                        } else {
                            let count = this.categories[this.activeTab] || 0;
                            for (let i = 1; i <= count; i++) {
                                images.push(`assets/images/projects/${this.activeTab}/${i}.jpg`);
                            }
                        }
                        return images;
                    },

                    get activeTabLabel() {
                        let tab = this.tabs.find(t => t.id === this.activeTab);
                        return tab ? tab.label : '';
                    },

                    openLightbox(img) {
                        this.lightboxImage = img;
                        this.lightboxOpen = true;
                    }
                }
            }
            </script>

            <!-- CTA Section -->
            <section class="relative py-16 px-4 md:px-8 text-white overflow-hidden">
                <!-- Background image -->
                <div class="absolute inset-0 bg-cover bg-center" style="background-image: url('assets/images/bg_images/bg_image-1.jpg');"></div>
                
                <!-- Blue overlay -->
                <div class="absolute inset-0 bg-blue-800 opacity-70"></div>
                
                <!-- Content -->
                <div class="relative container mx-auto max-w-4xl text-center">
                    <h2 class="text-3xl font-bold mb-6">Хотите такой же качественный проект?</h2>
                    <p class="text-xl mb-8">Наши специалисты разработают для вас индивидуальное решение и реализуют его с безупречным качеством</p>
                    <div class="flex flex-col sm:flex-row justify-center gap-4">
                        <a href="/contact" class="bg-white text-blue-800 font-bold py-3 px-8 rounded hover:bg-gray-100 transition-colors">
                            Обсудить проект
                        </a>
                        <a href="/catalog" class="bg-transparent border-2 border-white text-white font-bold py-3 px-8 rounded hover:bg-white hover:text-blue-800 transition-colors">
                            Смотреть каталог
                        </a>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Footer -->
    <footer id="footer-wrapper" class="bg-gray-800 text-white py-12 px-4 md:px-8"></footer>    

    <!-- Mobile sidebar overlay -->
    <div x-show="sidebarOpen" class="fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden" @click="sidebarOpen = false" x-transition></div>
    <script src="scripts.js"></script>
</body>
</html>